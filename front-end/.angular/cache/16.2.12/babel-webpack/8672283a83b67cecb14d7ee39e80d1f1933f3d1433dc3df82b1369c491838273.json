{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Services/player-control/media.service\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = [\"audioPlayer\"];\nfunction PlayerControlsComponent_ng_container_3_h3_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Reproduciendo desde \", ctx_r3.selectedSong == null ? null : ctx_r3.selectedSong.album == null ? null : ctx_r3.selectedSong.album.albumTitle, \" \");\n  }\n}\nfunction PlayerControlsComponent_ng_container_3_h3_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Reproduciendo desde \", ctx_r4.Myplaylist == null ? null : ctx_r4.Myplaylist.playlistName, \" \");\n  }\n}\nfunction PlayerControlsComponent_ng_container_3_h3_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 24);\n    i0.ɵɵtext(1, \" Reproduciendo desde mi lista de favoritos \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PlayerControlsComponent_ng_container_3_h3_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 25);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r6.selectedSong == null ? null : ctx_r6.selectedSong.album == null ? null : ctx_r6.selectedSong.album.artist == null ? null : ctx_r6.selectedSong.album.artist.artistName, \" \");\n  }\n}\nfunction PlayerControlsComponent_ng_container_3_p_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r7 = i0.ɵɵreference(9);\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r8.formatTime(_r7.nativeElement.duration), \" \");\n  }\n}\nfunction PlayerControlsComponent_ng_container_3_ng_template_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"0:00\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PlayerControlsComponent_ng_container_3_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"p\", 27);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate((ctx_r11.selectedSong == null ? null : ctx_r11.selectedSong.songTitle) + \" - \" + (ctx_r11.selectedSong == null ? null : ctx_r11.selectedSong.album == null ? null : ctx_r11.selectedSong.album.artist == null ? null : ctx_r11.selectedSong.album.artist.artistName));\n  }\n}\nfunction PlayerControlsComponent_ng_container_3_h3_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r12.selectedSong == null ? null : ctx_r12.selectedSong.title, \" - \", ctx_r12.selectedSong == null ? null : ctx_r12.selectedSong.artist == null ? null : ctx_r12.selectedSong.artist.artistName, \" \");\n  }\n}\nfunction PlayerControlsComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 3);\n    i0.ɵɵtemplate(2, PlayerControlsComponent_ng_container_3_h3_2_Template, 2, 1, \"h3\", 4);\n    i0.ɵɵtemplate(3, PlayerControlsComponent_ng_container_3_h3_3_Template, 2, 1, \"h3\", 4);\n    i0.ɵɵtemplate(4, PlayerControlsComponent_ng_container_3_h3_4_Template, 2, 0, \"h3\", 4);\n    i0.ɵɵtemplate(5, PlayerControlsComponent_ng_container_3_h3_5_Template, 2, 1, \"h3\", 5);\n    i0.ɵɵelementStart(6, \"div\", 6);\n    i0.ɵɵlistener(\"click\", function PlayerControlsComponent_ng_container_3_Template_div_click_6_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.openMusicPlayer());\n    });\n    i0.ɵɵelement(7, \"img\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"audio\", 0, 1);\n    i0.ɵɵlistener(\"timeupdate\", function PlayerControlsComponent_ng_container_3_Template_audio_timeupdate_8_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.handleTimeUpdate($event));\n    });\n    i0.ɵɵtext(10, \" Tu navegador no soporta el elemento de audio. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 8);\n    i0.ɵɵelement(12, \"br\");\n    i0.ɵɵelementStart(13, \"div\", 9)(14, \"div\", 10);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"input\", 11);\n    i0.ɵɵlistener(\"input\", function PlayerControlsComponent_ng_container_3_Template_input_input_16_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.handleProgressBar($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 12);\n    i0.ɵɵtemplate(18, PlayerControlsComponent_ng_container_3_p_18_Template, 2, 1, \"p\", 13);\n    i0.ɵɵtemplate(19, PlayerControlsComponent_ng_container_3_ng_template_19_Template, 2, 0, \"ng-template\", null, 14, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(21, \"div\", 15);\n    i0.ɵɵtemplate(22, PlayerControlsComponent_ng_container_3_div_22_Template, 3, 1, \"div\", 16);\n    i0.ɵɵtemplate(23, PlayerControlsComponent_ng_container_3_h3_23_Template, 2, 2, \"h3\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"div\", 18)(25, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function PlayerControlsComponent_ng_container_3_Template_button_click_25_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.play_previous_song());\n    });\n    i0.ɵɵelement(26, \"i\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function PlayerControlsComponent_ng_container_3_Template_button_click_27_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.togglePlayPause());\n    });\n    i0.ɵɵelement(28, \"i\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function PlayerControlsComponent_ng_container_3_Template_button_click_29_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.play_next_song());\n    });\n    i0.ɵɵelement(30, \"i\", 23);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const _r7 = i0.ɵɵreference(9);\n    const _r9 = i0.ɵɵreference(20);\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r1.selectedSong == null ? null : ctx_r1.selectedSong.album == null ? null : ctx_r1.selectedSong.album.albumTitle) && ctx_r1.favoriteList === false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r1.Myplaylist == null ? null : ctx_r1.Myplaylist.playlistName) && ctx_r1.favoriteList === false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.favoriteList);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r1.selectedSong == null ? null : ctx_r1.selectedSong.album == null ? null : ctx_r1.selectedSong.album.artist == null ? null : ctx_r1.selectedSong.album.artist.artistName) && ctx_r1.favoriteList === false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", (ctx_r1.selectedSong == null ? null : ctx_r1.selectedSong.album == null ? null : ctx_r1.selectedSong.album.coverImage) || (ctx_r1.Myplaylist == null ? null : ctx_r1.Myplaylist.coverImage), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(ctx_r1.formatTime((_r7 == null ? null : _r7.nativeElement == null ? null : _r7.nativeElement.currentTime) ? _r7.nativeElement.currentTime : 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", (_r7 == null ? null : _r7.nativeElement == null ? null : _r7.nativeElement.currentTime) / (_r7 == null ? null : _r7.nativeElement == null ? null : _r7.nativeElement.duration) * 100 || 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r7 == null ? null : _r7.nativeElement == null ? null : _r7.nativeElement.duration)(\"ngIfElse\", _r9);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.selectedSong == null ? null : ctx_r1.selectedSong.album == null ? null : ctx_r1.selectedSong.album.artist == null ? null : ctx_r1.selectedSong.album.artist.artistName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r1.selectedSong == null ? null : ctx_r1.selectedSong.album == null ? null : ctx_r1.selectedSong.album.artist == null ? null : ctx_r1.selectedSong.album.artist.artistName) && (ctx_r1.selectedSong == null ? null : ctx_r1.selectedSong.artist == null ? null : ctx_r1.selectedSong.artist.artistName));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngClass\", ctx_r1.playIcon);\n  }\n}\nfunction PlayerControlsComponent_ng_container_4_div_1_p_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r21 = i0.ɵɵnextContext(3);\n    const _r0 = i0.ɵɵreference(1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r21.formatTime(_r0.nativeElement.duration), \" \");\n  }\n}\nfunction PlayerControlsComponent_ng_container_4_div_1_ng_template_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"0:00\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PlayerControlsComponent_ng_container_4_div_1_h3_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 36);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r24 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r24.selectedSong == null ? null : ctx_r24.selectedSong.songTitle, \" - \", ctx_r24.selectedSong == null ? null : ctx_r24.selectedSong.album == null ? null : ctx_r24.selectedSong.album.artist == null ? null : ctx_r24.selectedSong.album.artist.artistName, \" \");\n  }\n}\nfunction PlayerControlsComponent_ng_container_4_div_1_h3_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 36);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r25 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r25.selectedSong == null ? null : ctx_r25.selectedSong.title, \" - \", ctx_r25.selectedSong == null ? null : ctx_r25.selectedSong.artist == null ? null : ctx_r25.selectedSong.artist.artistName, \" \");\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    \"background-color\": a0\n  };\n};\nfunction PlayerControlsComponent_ng_container_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"div\", 31)(2, \"div\", 32)(3, \"div\", 6);\n    i0.ɵɵlistener(\"click\", function PlayerControlsComponent_ng_container_4_div_1_Template_div_click_3_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r26.openMusicPlayer());\n    });\n    i0.ɵɵelement(4, \"img\", 33);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(5, \"div\", 8)(6, \"div\", 9)(7, \"div\", 10);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"input\", 11);\n    i0.ɵɵlistener(\"input\", function PlayerControlsComponent_ng_container_4_div_1_Template_input_input_9_listener($event) {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r28 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r28.handleProgressBar($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 12);\n    i0.ɵɵtemplate(11, PlayerControlsComponent_ng_container_4_div_1_p_11_Template, 2, 1, \"p\", 13);\n    i0.ɵɵtemplate(12, PlayerControlsComponent_ng_container_4_div_1_ng_template_12_Template, 2, 0, \"ng-template\", null, 14, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"div\", 34);\n    i0.ɵɵtemplate(15, PlayerControlsComponent_ng_container_4_div_1_h3_15_Template, 2, 2, \"h3\", 35);\n    i0.ɵɵtemplate(16, PlayerControlsComponent_ng_container_4_div_1_h3_16_Template, 2, 2, \"h3\", 35);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 18)(18, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function PlayerControlsComponent_ng_container_4_div_1_Template_button_click_18_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r29 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r29.play_previous_song());\n    });\n    i0.ɵɵelement(19, \"i\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function PlayerControlsComponent_ng_container_4_div_1_Template_button_click_20_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r30 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r30.togglePlayPause());\n    });\n    i0.ɵɵelement(21, \"i\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function PlayerControlsComponent_ng_container_4_div_1_Template_button_click_22_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r31 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r31.play_next_song());\n    });\n    i0.ɵɵelement(23, \"i\", 23);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const _r22 = i0.ɵɵreference(13);\n    const ctx_r20 = i0.ɵɵnextContext(2);\n    const _r0 = i0.ɵɵreference(1);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(9, _c1, ctx_r20.reproductorP ? \"#ffffff00\" : \"black\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", (ctx_r20.selectedSong == null ? null : ctx_r20.selectedSong.album == null ? null : ctx_r20.selectedSong.album.coverImage) || (ctx_r20.Myplaylist == null ? null : ctx_r20.Myplaylist.coverImage), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r20.formatTime((_r0 == null ? null : _r0.nativeElement == null ? null : _r0.nativeElement.currentTime) ? _r0.nativeElement.currentTime : 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", (_r0 == null ? null : _r0.nativeElement == null ? null : _r0.nativeElement.currentTime) / (_r0 == null ? null : _r0.nativeElement == null ? null : _r0.nativeElement.duration) * 100 || 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r0 == null ? null : _r0.nativeElement == null ? null : _r0.nativeElement.duration)(\"ngIfElse\", _r22);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r20.selectedSong == null ? null : ctx_r20.selectedSong.album == null ? null : ctx_r20.selectedSong.album.artist == null ? null : ctx_r20.selectedSong.album.artist.artistName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !(ctx_r20.selectedSong == null ? null : ctx_r20.selectedSong.album == null ? null : ctx_r20.selectedSong.album.artist == null ? null : ctx_r20.selectedSong.album.artist.artistName) && (ctx_r20.selectedSong == null ? null : ctx_r20.selectedSong.artist == null ? null : ctx_r20.selectedSong.artist.artistName));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngClass\", ctx_r20.playIcon);\n  }\n}\nfunction PlayerControlsComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, PlayerControlsComponent_ng_container_4_div_1_Template, 24, 11, \"div\", 29);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedSong);\n  }\n}\nexport class PlayerControlsComponent {\n  set selectedSong(song) {\n    if (song) {\n      this._selectedSong = song;\n      this.loadSong(song);\n    }\n  }\n  constructor(mediaService) {\n    this.mediaService = mediaService;\n    this.songs = [];\n    this.playIcon = 'fa-play';\n    this.audioContext = null;\n    this.isPlaying = false;\n  }\n  ngOnInit() {\n    this.setupAudioEvents();\n    this.audioContext = new AudioContext();\n    this.currentSongSubscription = this.mediaService.currentSong$.subscribe(song => {\n      this.selectedSong = song;\n    });\n    this.mediaService.currentAlbum$.subscribe(album => {\n      if (album) {\n        this.songs = album.songs;\n        this.resetPlayer();\n      }\n    });\n  }\n  ngOnDestroy() {\n    this.pause();\n    this.audioPlayer.nativeElement.removeEventListener('ended', this.handleEnded.bind(this));\n    this.audioPlayer.nativeElement.removeEventListener('timeupdate', this.handleTimeUpdate.bind(this));\n    clearInterval(this.progressInterval);\n    this.currentSongSubscription.unsubscribe();\n  }\n  setupAudioEvents() {\n    this.audioPlayer.nativeElement.addEventListener('ended', this.handleEnded.bind(this));\n    this.audioPlayer.nativeElement.addEventListener('timeupdate', this.handleTimeUpdate.bind(this));\n  }\n  handleEnded() {\n    this.playNextSong();\n  }\n  loadSong(song) {\n    if (song) {\n      this.resetPlayer();\n      this._selectedSong = song;\n      this.setAudioSource(song.audio);\n      this.printNextAndPreviousSongs();\n    }\n  }\n  play() {\n    if (this.audioPlayer && this.audioPlayer.nativeElement && this._selectedSong) {\n      this.audioPlayer.nativeElement.play().then(() => {\n        console.log('Reproduciendo...');\n        this.playIcon = 'fa-pause';\n        this.isPlaying = true;\n        this.startProgressInterval();\n      }).catch(error => {\n        console.error('Error al reproducir el audio:', error);\n      });\n    }\n  }\n  pause() {\n    if (this.audioPlayer && this.audioPlayer.nativeElement) {\n      this.audioPlayer.nativeElement.pause();\n      console.log('Pausado...');\n      this.playIcon = 'fa-play';\n      this.isPlaying = false;\n      clearInterval(this.progressInterval);\n    }\n  }\n  togglePlayPause() {\n    if (this.audioPlayer && this.audioPlayer.nativeElement) {\n      if (this.audioPlayer.nativeElement.paused) {\n        this.play();\n      } else {\n        this.pause();\n      }\n    }\n  }\n  selectAlbum(album) {\n    this.mediaService.setCurrentAlbum(album);\n  }\n  printNextAndPreviousSongs() {\n    if (this.songs && this.songs.length > 0 && this._selectedSong) {\n      const currentIndex = this.songs.findIndex(song => song.id === this._selectedSong.id);\n      const previousIndex = (currentIndex - 1 + this.songs.length) % this.songs.length;\n      const nextIndex = (currentIndex + 1) % this.songs.length;\n      const previousSong = this.songs[previousIndex];\n      const nextSong = this.songs[nextIndex];\n      console.log('Canción actual:', this._selectedSong);\n      console.log('Canción anterior:', previousSong);\n      console.log('Siguiente canción:', nextSong);\n    }\n  }\n  playNextSong() {\n    if (this.songs && this.songs.length > 0 && this._selectedSong) {\n      const currentIndex = this.songs.findIndex(song => song.id === this._selectedSong.id);\n      const nextIndex = (currentIndex + 1) % this.songs.length;\n      const nextSong = this.songs[nextIndex];\n      if (nextSong) {\n        this.selectedSong = nextSong;\n      }\n    }\n  }\n  playPreviousSong() {\n    if (this.songs && this.songs.length > 0 && this._selectedSong) {\n      const currentIndex = this.songs.findIndex(song => song.id === this._selectedSong.id);\n      const previousIndex = (currentIndex - 1 + this.songs.length) % this.songs.length;\n      const previousSong = this.songs[previousIndex];\n      if (previousSong) {\n        this.selectedSong = previousSong;\n      }\n    }\n  }\n  handleTimeUpdate(event) {\n    if (this.audioPlayer && this.audioPlayer.nativeElement) {\n      const progress = this.audioPlayer.nativeElement.currentTime / this.audioPlayer.nativeElement.duration * 100;\n      const progressBar = document.getElementById('progressBar');\n      if (progressBar) {\n        progressBar.value = progress.toString();\n      }\n    }\n  }\n  handleProgressBar(event) {\n    if (this.audioPlayer && this.audioPlayer.nativeElement) {\n      const progress = event.target.value;\n      const duration = this.audioPlayer.nativeElement.duration;\n      if (!isNaN(duration) && isFinite(duration)) {\n        const newTime = duration * progress / 100;\n        if (!isNaN(newTime) && isFinite(newTime)) {\n          this.audioPlayer.nativeElement.currentTime = newTime;\n        }\n      }\n    }\n  }\n  formatTime(seconds) {\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = Math.floor(seconds % 60);\n    return `${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;\n  }\n  startProgressInterval() {\n    clearInterval(this.progressInterval);\n    this.progressInterval = setInterval(() => {\n      if (this.audioPlayer && this.audioPlayer.nativeElement) {\n        const progress = this.audioPlayer.nativeElement.currentTime / this.audioPlayer.nativeElement.duration * 100;\n        const progressBar = document.getElementById('progressBar');\n        if (progressBar) {\n          progressBar.value = progress.toString();\n        }\n      }\n    }, 1000);\n  }\n  setAudioSource(audioUrl) {\n    if (this.audioPlayer && this.audioPlayer.nativeElement) {\n      this.audioPlayer.nativeElement.src = audioUrl;\n      this.audioPlayer.nativeElement.load();\n    }\n  }\n  resetPlayer() {\n    this.pause();\n    this._selectedSong = null;\n    if (this.audioPlayer && this.audioPlayer.nativeElement) {\n      this.audioPlayer.nativeElement.src = '';\n    }\n    this.playIcon = 'fa-play';\n    this.isPlaying = false;\n    clearInterval(this.progressInterval);\n  }\n  static #_ = this.ɵfac = function PlayerControlsComponent_Factory(t) {\n    return new (t || PlayerControlsComponent)(i0.ɵɵdirectiveInject(i1.MediaService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PlayerControlsComponent,\n    selectors: [[\"app-player-controls\"]],\n    viewQuery: function PlayerControlsComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.audioPlayer = _t.first);\n      }\n    },\n    inputs: {\n      selectedSong: \"selectedSong\",\n      songs: \"songs\"\n    },\n    decls: 5,\n    vars: 2,\n    consts: [[3, \"timeupdate\"], [\"audioPlayer\", \"\"], [4, \"ngIf\"], [1, \"myContainer\"], [\"class\", \"tit1\", 4, \"ngIf\"], [\"class\", \"tit2\", 4, \"ngIf\"], [3, \"click\"], [\"alt\", \"Media Cover\", 1, \"mySong-cover\", 3, \"src\"], [1, \"progress-container\"], [1, \"progress-style\"], [1, \"time-left\"], [\"id\", \"progressBar\", \"type\", \"range\", \"min\", \"0\", \"max\", \"100\", 1, \"form-range\", 3, \"value\", \"input\"], [1, \"time-right\"], [4, \"ngIf\", \"ngIfElse\"], [\"elseBlock\", \"\"], [1, \"mySong-info\"], [\"class\", \"myInfo\", 4, \"ngIf\"], [\"class\", \"title\", 4, \"ngIf\"], [1, \"controls\", \"mt-3\", \"player-button\"], [1, \"btn\", \"btn-primary\", \"skip-btn\", 3, \"click\"], [1, \"fas\", \"fa-backward\"], [1, \"btn\", \"btn-primary\", \"play-pause-btn\", 3, \"click\"], [1, \"fas\", 3, \"ngClass\"], [1, \"fas\", \"fa-forward\"], [1, \"tit1\"], [1, \"tit2\"], [1, \"myInfo\"], [1, \"myp1\"], [1, \"title\"], [\"class\", \"container1\", 3, \"ngStyle\", 4, \"ngIf\"], [1, \"container1\", 3, \"ngStyle\"], [1, \"media-container\"], [1, \"mediaDetails\"], [\"alt\", \"Media Cover\", 1, \"cover-image\", 2, \"max-width\", \"70px\", \"max-height\", \"70px\", \"border\", \"1px solid rgba(90, 7, 197, 0.26)\", 3, \"src\"], [1, \"song-info\"], [\"style\", \"font-family: 'Poppins', sans-serif;\", \"class\", \"title\", 4, \"ngIf\"], [1, \"title\", 2, \"font-family\", \"'Poppins', sans-serif\"]],\n    template: function PlayerControlsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"audio\", 0, 1);\n        i0.ɵɵlistener(\"timeupdate\", function PlayerControlsComponent_Template_audio_timeupdate_0_listener($event) {\n          return ctx.handleTimeUpdate($event);\n        });\n        i0.ɵɵtext(2, \" Tu navegador no soporta el elemento de audio.\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, PlayerControlsComponent_ng_container_3_Template, 31, 12, \"ng-container\", 2);\n        i0.ɵɵtemplate(4, PlayerControlsComponent_ng_container_4_Template, 2, 1, \"ng-container\", 2);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.reproductorP === false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.reproductorP);\n      }\n    },\n    dependencies: [i2.NgClass, i2.NgIf, i2.NgStyle],\n    styles: [\".container1[_ngcontent-%COMP%] {\\n    background-color: black;\\n    width: auto;\\n    height: 400px;\\n    width: 100%;\\n    font-family: 'Poppins', sans-serif;\\n    color: white;\\n    display: flex;\\n    flex-direction: column;\\n    padding-left: 50px;\\n    padding-right: 50px;\\n}\\n\\n.media-container[_ngcontent-%COMP%] {\\n    display: flex;\\n    flex-direction: column;\\n    align-items: flex-start; \\n    margin-bottom: 20px;\\n    padding-top: 10px;\\n}\\n\\n.mediaDetails[_ngcontent-%COMP%] {\\n    padding: 5px;\\n    border-radius: 10px;\\n}\\n\\n.cover-image[_ngcontent-%COMP%]{\\n    height: 150px;\\n    width: 150px;\\n    align-content: first baseline;\\n}\\n\\n.progress-container[_ngcontent-%COMP%] {\\n    width: 100%;\\n}\\n\\n.progress-style[_ngcontent-%COMP%] {\\n    display: flex;\\n    align-items: center;\\n}\\n\\n.time-left[_ngcontent-%COMP%], .time-right[_ngcontent-%COMP%] {\\n    font-size: 15px;\\n    text-align: left;\\n}\\n\\n.song-info[_ngcontent-%COMP%] {\\n    text-align: left; \\n    padding-top: 5px;\\n    font-family: 'Poppins', sans-serif;\\n}\\n\\n\\n.controls[_ngcontent-%COMP%] {\\n    display: flex;\\n    justify-content: center; \\n}\\n\\n\\n.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n    margin: 0 10px;\\n    font-size: 25px;\\n}\\n\\n.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n    font-size: 20px;\\n}\\n\\n.btn[_ngcontent-%COMP%]:focus {\\n    outline: none;\\n}\\n\\n.play-pause-btn[_ngcontent-%COMP%] {\\n    color: white;\\n    border-radius: 30px;\\n    background-color: blue;\\n    border: none;\\n    margin-right: 20px;\\n    height: 50px;\\n    width: 50px;\\n}\\n\\n.play-pause-btn[_ngcontent-%COMP%]:hover, .play-pause-btn[_ngcontent-%COMP%]:focus, .play-pause-btn[_ngcontent-%COMP%]:active {\\n    background-color: blue;\\n}\\n\\n.skip-btn[_ngcontent-%COMP%] {\\n    color: white;\\n    background-color: transparent;\\n    border: none;\\n    margin-right: 20px;\\n}\\n\\n.skip-btn[_ngcontent-%COMP%]:hover, .skip-btn[_ngcontent-%COMP%]:focus, .skip-btn[_ngcontent-%COMP%]:active {\\n    background-color: transparent;\\n    border: 1px solid white;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvQ29tcG9uZW50cy9wbGF5ZXItY29udHJvbHMvcGxheWVyLWNvbnRyb2xzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSx1QkFBdUI7SUFDdkIsV0FBVztJQUNYLGFBQWE7SUFDYixXQUFXO0lBQ1gsa0NBQWtDO0lBQ2xDLFlBQVk7SUFDWixhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLGtCQUFrQjtJQUNsQixtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLHVCQUF1QjtJQUN2QixtQkFBbUI7SUFDbkIsaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksWUFBWTtJQUNaLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLGFBQWE7SUFDYixZQUFZO0lBQ1osNkJBQTZCO0FBQ2pDOztBQUVBO0lBQ0ksV0FBVztBQUNmOztBQUVBO0lBQ0ksYUFBYTtJQUNiLG1CQUFtQjtBQUN2Qjs7QUFFQTs7SUFFSSxlQUFlO0lBQ2YsZ0JBQWdCO0FBQ3BCOztBQUVBO0lBQ0ksZ0JBQWdCO0lBQ2hCLGdCQUFnQjtJQUNoQixrQ0FBa0M7QUFDdEM7OztBQUdBO0lBQ0ksYUFBYTtJQUNiLHVCQUF1QjtBQUMzQjs7O0FBR0E7SUFDSSxjQUFjO0lBQ2QsZUFBZTtBQUNuQjs7QUFFQTtJQUNJLGVBQWU7QUFDbkI7O0FBRUE7SUFDSSxhQUFhO0FBQ2pCOztBQUVBO0lBQ0ksWUFBWTtJQUNaLG1CQUFtQjtJQUNuQixzQkFBc0I7SUFDdEIsWUFBWTtJQUNaLGtCQUFrQjtJQUNsQixZQUFZO0lBQ1osV0FBVztBQUNmOztBQUVBOzs7SUFHSSxzQkFBc0I7QUFDMUI7O0FBRUE7SUFDSSxZQUFZO0lBQ1osNkJBQTZCO0lBQzdCLFlBQVk7SUFDWixrQkFBa0I7QUFDdEI7O0FBRUE7OztJQUdJLDZCQUE2QjtJQUM3Qix1QkFBdUI7QUFDM0IiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGFpbmVyMSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcclxuICAgIHdpZHRoOiBhdXRvO1xyXG4gICAgaGVpZ2h0OiA0MDBweDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgZm9udC1mYW1pbHk6ICdQb3BwaW5zJywgc2Fucy1zZXJpZjtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgcGFkZGluZy1sZWZ0OiA1MHB4O1xyXG4gICAgcGFkZGluZy1yaWdodDogNTBweDtcclxufVxyXG5cclxuLm1lZGlhLWNvbnRhaW5lciB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OyBcclxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbiAgICBwYWRkaW5nLXRvcDogMTBweDtcclxufVxyXG5cclxuLm1lZGlhRGV0YWlscyB7XHJcbiAgICBwYWRkaW5nOiA1cHg7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG59XHJcblxyXG4uY292ZXItaW1hZ2V7XHJcbiAgICBoZWlnaHQ6IDE1MHB4O1xyXG4gICAgd2lkdGg6IDE1MHB4O1xyXG4gICAgYWxpZ24tY29udGVudDogZmlyc3QgYmFzZWxpbmU7XHJcbn1cclxuXHJcbi5wcm9ncmVzcy1jb250YWluZXIge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbn1cclxuXHJcbi5wcm9ncmVzcy1zdHlsZSB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxufVxyXG5cclxuLnRpbWUtbGVmdCxcclxuLnRpbWUtcmlnaHQge1xyXG4gICAgZm9udC1zaXplOiAxNXB4O1xyXG4gICAgdGV4dC1hbGlnbjogbGVmdDtcclxufVxyXG5cclxuLnNvbmctaW5mbyB7XHJcbiAgICB0ZXh0LWFsaWduOiBsZWZ0OyBcclxuICAgIHBhZGRpbmctdG9wOiA1cHg7XHJcbiAgICBmb250LWZhbWlseTogJ1BvcHBpbnMnLCBzYW5zLXNlcmlmO1xyXG59XHJcblxyXG5cclxuLmNvbnRyb2xzIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgXHJcbn1cclxuXHJcblxyXG4uY29udHJvbHMgYnV0dG9uIHtcclxuICAgIG1hcmdpbjogMCAxMHB4O1xyXG4gICAgZm9udC1zaXplOiAyNXB4O1xyXG59XHJcblxyXG4uYnRuIGkge1xyXG4gICAgZm9udC1zaXplOiAyMHB4O1xyXG59XHJcblxyXG4uYnRuOmZvY3VzIHtcclxuICAgIG91dGxpbmU6IG5vbmU7XHJcbn1cclxuXHJcbi5wbGF5LXBhdXNlLWJ0biB7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBib3JkZXItcmFkaXVzOiAzMHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogYmx1ZTtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIG1hcmdpbi1yaWdodDogMjBweDtcclxuICAgIGhlaWdodDogNTBweDtcclxuICAgIHdpZHRoOiA1MHB4O1xyXG59XHJcblxyXG4ucGxheS1wYXVzZS1idG46aG92ZXIsXHJcbi5wbGF5LXBhdXNlLWJ0bjpmb2N1cyxcclxuLnBsYXktcGF1c2UtYnRuOmFjdGl2ZSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibHVlO1xyXG59XHJcblxyXG4uc2tpcC1idG4ge1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7XHJcbn1cclxuXHJcbi5za2lwLWJ0bjpob3ZlcixcclxuLnNraXAtYnRuOmZvY3VzLFxyXG4uc2tpcC1idG46YWN0aXZlIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgd2hpdGU7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r3","selectedSong","album","albumTitle","ctx_r4","Myplaylist","playlistName","ctx_r6","artist","artistName","ctx_r8","formatTime","_r7","nativeElement","duration","ɵɵtextInterpolate","ctx_r11","songTitle","ɵɵtextInterpolate2","ctx_r12","title","ɵɵelementContainerStart","ɵɵtemplate","PlayerControlsComponent_ng_container_3_h3_2_Template","PlayerControlsComponent_ng_container_3_h3_3_Template","PlayerControlsComponent_ng_container_3_h3_4_Template","PlayerControlsComponent_ng_container_3_h3_5_Template","ɵɵlistener","PlayerControlsComponent_ng_container_3_Template_div_click_6_listener","ɵɵrestoreView","_r14","ctx_r13","ɵɵnextContext","ɵɵresetView","openMusicPlayer","ɵɵelement","PlayerControlsComponent_ng_container_3_Template_audio_timeupdate_8_listener","$event","ctx_r15","handleTimeUpdate","PlayerControlsComponent_ng_container_3_Template_input_input_16_listener","ctx_r16","handleProgressBar","PlayerControlsComponent_ng_container_3_p_18_Template","PlayerControlsComponent_ng_container_3_ng_template_19_Template","ɵɵtemplateRefExtractor","PlayerControlsComponent_ng_container_3_div_22_Template","PlayerControlsComponent_ng_container_3_h3_23_Template","PlayerControlsComponent_ng_container_3_Template_button_click_25_listener","ctx_r17","play_previous_song","PlayerControlsComponent_ng_container_3_Template_button_click_27_listener","ctx_r18","togglePlayPause","PlayerControlsComponent_ng_container_3_Template_button_click_29_listener","ctx_r19","play_next_song","ɵɵelementContainerEnd","ɵɵproperty","ctx_r1","favoriteList","coverImage","ɵɵsanitizeUrl","currentTime","_r9","playIcon","ctx_r21","_r0","ctx_r24","ctx_r25","PlayerControlsComponent_ng_container_4_div_1_Template_div_click_3_listener","_r27","ctx_r26","PlayerControlsComponent_ng_container_4_div_1_Template_input_input_9_listener","ctx_r28","PlayerControlsComponent_ng_container_4_div_1_p_11_Template","PlayerControlsComponent_ng_container_4_div_1_ng_template_12_Template","PlayerControlsComponent_ng_container_4_div_1_h3_15_Template","PlayerControlsComponent_ng_container_4_div_1_h3_16_Template","PlayerControlsComponent_ng_container_4_div_1_Template_button_click_18_listener","ctx_r29","PlayerControlsComponent_ng_container_4_div_1_Template_button_click_20_listener","ctx_r30","PlayerControlsComponent_ng_container_4_div_1_Template_button_click_22_listener","ctx_r31","ɵɵpureFunction1","_c1","ctx_r20","reproductorP","_r22","PlayerControlsComponent_ng_container_4_div_1_Template","ctx_r2","PlayerControlsComponent","song","_selectedSong","loadSong","constructor","mediaService","songs","audioContext","isPlaying","ngOnInit","setupAudioEvents","AudioContext","currentSongSubscription","currentSong$","subscribe","currentAlbum$","resetPlayer","ngOnDestroy","pause","audioPlayer","removeEventListener","handleEnded","bind","clearInterval","progressInterval","unsubscribe","addEventListener","playNextSong","setAudioSource","audio","printNextAndPreviousSongs","play","then","console","log","startProgressInterval","catch","error","paused","selectAlbum","setCurrentAlbum","length","currentIndex","findIndex","id","previousIndex","nextIndex","previousSong","nextSong","playPreviousSong","event","progress","progressBar","document","getElementById","value","toString","target","isNaN","isFinite","newTime","seconds","minutes","Math","floor","remainingSeconds","setInterval","audioUrl","src","load","_","ɵɵdirectiveInject","i1","MediaService","_2","selectors","viewQuery","PlayerControlsComponent_Query","rf","ctx","PlayerControlsComponent_Template_audio_timeupdate_0_listener","PlayerControlsComponent_ng_container_3_Template","PlayerControlsComponent_ng_container_4_Template"],"sources":["C:\\Comercio\\version12\\musicsound\\front-end\\src\\app\\Components\\player-controls\\player-controls.component.ts","C:\\Comercio\\version12\\musicsound\\front-end\\src\\app\\Components\\player-controls\\player-controls.component.html"],"sourcesContent":["import {\r\n  Component,\r\n  OnInit,\r\n  OnDestroy,\r\n  ViewChild,\r\n  ElementRef,\r\n  Input,\r\n} from '@angular/core';\r\nimport { MediaService } from 'src/app/Services/player-control/media.service';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-player-controls',\r\n  templateUrl: './player-controls.component.html',\r\n  styleUrls: ['./player-controls.component.css'],\r\n})\r\nexport class PlayerControlsComponent implements OnInit, OnDestroy {\r\n  @ViewChild('audioPlayer', { static: true })\r\n  audioPlayer!: ElementRef<HTMLAudioElement>;\r\n\r\n  @Input() set selectedSong(song: any) {\r\n    if (song) {\r\n      this._selectedSong = song;\r\n      this.loadSong(song);\r\n    }\r\n  }\r\n  @Input() songs: any[] = [];\r\n\r\n  private _selectedSong: any;\r\n  private currentSongSubscription: Subscription;\r\n  playIcon: string = 'fa-play';\r\n  audioContext: AudioContext | null = null;\r\n  isPlaying: boolean = false;\r\n  progressInterval: any;\r\n\r\n  constructor(private mediaService: MediaService) {}\r\n\r\n  ngOnInit() {\r\n    this.setupAudioEvents();\r\n    this.audioContext = new AudioContext();\r\n\r\n    this.currentSongSubscription = this.mediaService.currentSong$.subscribe(\r\n      (song) => {\r\n        this.selectedSong = song;\r\n      }\r\n    );\r\n\r\n    this.mediaService.currentAlbum$.subscribe((album) => {\r\n      if (album) {\r\n        this.songs = album.songs;\r\n        this.resetPlayer();\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.pause();\r\n    this.audioPlayer.nativeElement.removeEventListener(\r\n      'ended',\r\n      this.handleEnded.bind(this)\r\n    );\r\n    this.audioPlayer.nativeElement.removeEventListener(\r\n      'timeupdate',\r\n      this.handleTimeUpdate.bind(this)\r\n    );\r\n    clearInterval(this.progressInterval);\r\n    this.currentSongSubscription.unsubscribe();\r\n  }\r\n\r\n  setupAudioEvents() {\r\n    this.audioPlayer.nativeElement.addEventListener(\r\n      'ended',\r\n      this.handleEnded.bind(this)\r\n    );\r\n    this.audioPlayer.nativeElement.addEventListener(\r\n      'timeupdate',\r\n      this.handleTimeUpdate.bind(this)\r\n    );\r\n  }\r\n\r\n  handleEnded() {\r\n    this.playNextSong();\r\n  }\r\n\r\n  loadSong(song: any) {\r\n    if (song) {\r\n      this.resetPlayer();\r\n      this._selectedSong = song;\r\n      this.setAudioSource(song.audio);\r\n      this.printNextAndPreviousSongs();\r\n    }\r\n  }\r\n\r\n  play() {\r\n    if (this.audioPlayer && this.audioPlayer.nativeElement && this._selectedSong) {\r\n      this.audioPlayer.nativeElement.play().then(() => {\r\n        console.log('Reproduciendo...');\r\n        this.playIcon = 'fa-pause';\r\n        this.isPlaying = true;\r\n        this.startProgressInterval();\r\n      }).catch(error => {\r\n        console.error('Error al reproducir el audio:', error);\r\n      });\r\n    }\r\n  }\r\n\r\n  pause() {\r\n    if (this.audioPlayer && this.audioPlayer.nativeElement) {\r\n      this.audioPlayer.nativeElement.pause();\r\n      console.log('Pausado...');\r\n      this.playIcon = 'fa-play';\r\n      this.isPlaying = false;\r\n      clearInterval(this.progressInterval);\r\n    }\r\n  }\r\n\r\n  togglePlayPause() {\r\n    if (this.audioPlayer && this.audioPlayer.nativeElement) {\r\n      if (this.audioPlayer.nativeElement.paused) {\r\n        this.play();\r\n      } else {\r\n        this.pause();\r\n      }\r\n    }\r\n  }\r\n\r\n  selectAlbum(album: any) {\r\n    this.mediaService.setCurrentAlbum(album);\r\n  }\r\n\r\n  printNextAndPreviousSongs() {\r\n    if (this.songs && this.songs.length > 0 && this._selectedSong) {\r\n      const currentIndex = this.songs.findIndex(\r\n        (song) => song.id === this._selectedSong.id\r\n      );\r\n\r\n      const previousIndex =\r\n        (currentIndex - 1 + this.songs.length) % this.songs.length;\r\n      const nextIndex = (currentIndex + 1) % this.songs.length;\r\n\r\n      const previousSong = this.songs[previousIndex];\r\n      const nextSong = this.songs[nextIndex];\r\n\r\n      console.log('Canción actual:', this._selectedSong);\r\n      console.log('Canción anterior:', previousSong);\r\n      console.log('Siguiente canción:', nextSong);\r\n    }\r\n  }\r\n\r\n  playNextSong() {\r\n    if (this.songs && this.songs.length > 0 && this._selectedSong) {\r\n      const currentIndex = this.songs.findIndex(\r\n        (song) => song.id === this._selectedSong.id\r\n      );\r\n      const nextIndex = (currentIndex + 1) % this.songs.length;\r\n      const nextSong = this.songs[nextIndex];\r\n      if (nextSong) {\r\n        this.selectedSong = nextSong;\r\n      }\r\n    }\r\n  }\r\n\r\n  playPreviousSong() {\r\n    if (this.songs && this.songs.length > 0 && this._selectedSong) {\r\n      const currentIndex = this.songs.findIndex(\r\n        (song) => song.id === this._selectedSong.id\r\n      );\r\n      const previousIndex =\r\n        (currentIndex - 1 + this.songs.length) % this.songs.length;\r\n      const previousSong = this.songs[previousIndex];\r\n      if (previousSong) {\r\n        this.selectedSong = previousSong;\r\n      }\r\n    }\r\n  }\r\n\r\n  handleTimeUpdate(event: any) {\r\n    if (this.audioPlayer && this.audioPlayer.nativeElement) {\r\n      const progress =\r\n        (this.audioPlayer.nativeElement.currentTime /\r\n          this.audioPlayer.nativeElement.duration) *\r\n        100;\r\n      const progressBar = document.getElementById(\r\n        'progressBar'\r\n      ) as HTMLInputElement;\r\n      if (progressBar) {\r\n        progressBar.value = progress.toString();\r\n      }\r\n    }\r\n  }\r\n\r\n  handleProgressBar(event: any) {\r\n    if (this.audioPlayer && this.audioPlayer.nativeElement) {\r\n      const progress = event.target.value;\r\n      const duration = this.audioPlayer.nativeElement.duration;\r\n\r\n      if (!isNaN(duration) && isFinite(duration)) {\r\n        const newTime = (duration * progress) / 100;\r\n        if (!isNaN(newTime) && isFinite(newTime)) {\r\n          this.audioPlayer.nativeElement.currentTime = newTime;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  formatTime(seconds: number): string {\r\n    const minutes = Math.floor(seconds / 60);\r\n    const remainingSeconds = Math.floor(seconds % 60);\r\n    return `${minutes}:${remainingSeconds < 10 ? '0' : ''}${remainingSeconds}`;\r\n  }\r\n\r\n  startProgressInterval() {\r\n    clearInterval(this.progressInterval);\r\n    this.progressInterval = setInterval(() => {\r\n      if (this.audioPlayer && this.audioPlayer.nativeElement) {\r\n        const progress =\r\n          (this.audioPlayer.nativeElement.currentTime /\r\n            this.audioPlayer.nativeElement.duration) *\r\n          100;\r\n        const progressBar = document.getElementById(\r\n          'progressBar'\r\n        ) as HTMLInputElement;\r\n        if (progressBar) {\r\n          progressBar.value = progress.toString();\r\n        }\r\n      }\r\n    }, 1000);\r\n  }\r\n\r\n  setAudioSource(audioUrl: string) {\r\n    if (this.audioPlayer && this.audioPlayer.nativeElement) {\r\n      this.audioPlayer.nativeElement.src = audioUrl;\r\n      this.audioPlayer.nativeElement.load();\r\n    }\r\n  }\r\n  \r\n  resetPlayer() {\r\n    this.pause();\r\n    this._selectedSong = null;\r\n    if (this.audioPlayer && this.audioPlayer.nativeElement) {\r\n      this.audioPlayer.nativeElement.src = '';\r\n    }\r\n    this.playIcon = 'fa-play';\r\n    this.isPlaying = false;\r\n    clearInterval(this.progressInterval);\r\n  }\r\n  }","<!-- Audio player element -->\r\n<audio #audioPlayer (timeupdate)=\"handleTimeUpdate($event)\">\r\n    Tu navegador no soporta el elemento de audio.\r\n</audio>\r\n\r\n\r\n<ng-container *ngIf=\"reproductorP === false\">\r\n\r\n    <div class=\"myContainer\">\r\n        <!--Playing from...-->\r\n\r\n        <h3 class=\"tit1\" *ngIf=\"selectedSong?.album?.albumTitle && favoriteList === false\">\r\n            Reproduciendo desde {{ selectedSong?.album?.albumTitle }}\r\n        </h3>\r\n        <h3 class=\"tit1\" *ngIf=\"Myplaylist?.playlistName && favoriteList === false\">\r\n            Reproduciendo desde {{ Myplaylist?.playlistName }}\r\n        </h3>\r\n\r\n        <h3 class=\"tit1\" *ngIf=\"favoriteList\">\r\n            Reproduciendo desde mi lista de favoritos\r\n        </h3>\r\n\r\n\r\n        <!--Favorite-podcast-album-playlist name-->\r\n        <h3 class=\"tit2\" *ngIf=\"selectedSong?.album?.artist?.artistName && favoriteList === false\">\r\n            {{ selectedSong?.album?.artist?.artistName }}\r\n        </h3>\r\n\r\n\r\n        <div (click)=\"openMusicPlayer()\">\r\n            <!--Audio cover-->\r\n            <img class=\"mySong-cover\" [src]=\"selectedSong?.album?.coverImage || Myplaylist?.coverImage\"\r\n                alt=\"Media Cover\">\r\n        </div>\r\n\r\n        <!--Audio of the song or podcast-->\r\n        <audio #audioPlayer (timeupdate)=\"handleTimeUpdate($event)\">\r\n            Tu navegador no soporta el elemento de audio.\r\n        </audio>\r\n\r\n        <!--Progress bar-->\r\n        <div class=\"progress-container\">\r\n            <br>\r\n            <div class=\"progress-style\">\r\n                <div class=\"time-left\">{{ formatTime(audioPlayer?.nativeElement?.currentTime ?\r\n                    audioPlayer.nativeElement.currentTime : 0) }}</div>\r\n\r\n                <input id=\"progressBar\" type=\"range\" class=\"form-range\" min=\"0\" max=\"100\"\r\n                    [value]=\"(audioPlayer?.nativeElement?.currentTime / audioPlayer?.nativeElement?.duration * 100) || 0\"\r\n                    (input)=\"handleProgressBar($event)\">\r\n\r\n                <div class=\"time-right\">\r\n                    <p *ngIf=\"audioPlayer?.nativeElement?.duration; else elseBlock\">\r\n                        {{ formatTime(audioPlayer.nativeElement.duration) }}\r\n                    </p>\r\n                    <ng-template #elseBlock>\r\n                        <p>0:00</p>\r\n                    </ng-template>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"mySong-info\">\r\n            <div class=\"myInfo\" *ngIf=\"selectedSong?.album?.artist?.artistName\">\r\n                <!--Song-Podcast name and artist-->\r\n                <p class=\"myp1\">{{ selectedSong?.songTitle +' - '+ selectedSong?.album?.artist?.artistName}}</p>\r\n                \r\n            </div>\r\n            <!--For playlist-->\r\n            <h3 class=\"title\" *ngIf=\"!selectedSong?.album?.artist?.artistName && selectedSong?.artist?.artistName\">\r\n                {{ selectedSong?.title }} - {{ selectedSong?.artist?.artistName }}\r\n            </h3>\r\n        </div>\r\n\r\n        <!-- Player controls -->\r\n        <div class=\"controls mt-3 player-button\">\r\n            <button (click)=\"play_previous_song()\" class=\"btn btn-primary skip-btn\">\r\n                <i class=\"fas fa-backward\"></i>\r\n            </button>\r\n            <button (click)=\"togglePlayPause()\" class=\"btn btn-primary play-pause-btn\">\r\n                <i class=\"fas\" [ngClass]=\"playIcon\"></i>\r\n            </button>\r\n            <button (click)=\"play_next_song()\" class=\"btn btn-primary skip-btn\">\r\n                <i class=\"fas fa-forward\"></i>\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n</ng-container>\r\n\r\n\r\n\r\n\r\n\r\n<ng-container *ngIf=\"reproductorP\">\r\n\r\n<div [ngStyle]=\"{'background-color': reproductorP ? '#ffffff00' : 'black'}\" class=\"container1\" *ngIf=\"selectedSong\">\r\n    <div class=\"media-container\">\r\n        <div class=\"mediaDetails\">\r\n            <div (click)=\"openMusicPlayer()\">\r\n                <!-- Placeholder for media cover image -->\r\n                <img style=\"max-width: 70px; max-height: 70px; border: 1px solid rgba(90, 7, 197, 0.26);\" [src]=\"selectedSong?.album?.coverImage || Myplaylist?.coverImage\" alt=\"Media Cover\"\r\n                    class=\"cover-image\">\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!--Progress bar-->\r\n    \r\n    <div class=\"progress-container\">\r\n        <div class=\"progress-style\">\r\n            <div class=\"time-left\">{{ formatTime(audioPlayer?.nativeElement?.currentTime ?\r\n                audioPlayer.nativeElement.currentTime : 0) }}</div>\r\n\r\n            <input id=\"progressBar\" type=\"range\" class=\"form-range\" min=\"0\" max=\"100\"\r\n                [value]=\"(audioPlayer?.nativeElement?.currentTime / audioPlayer?.nativeElement?.duration * 100) || 0\"\r\n                (input)=\"handleProgressBar($event)\">\r\n\r\n            <div class=\"time-right\">\r\n                <p *ngIf=\"audioPlayer?.nativeElement?.duration; else elseBlock\">\r\n                    {{ formatTime(audioPlayer.nativeElement.duration) }}\r\n                </p>\r\n                <ng-template #elseBlock>\r\n                    <p>0:00</p>\r\n                </ng-template>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n    <!-- Song information -->\r\n    <div class=\"song-info\">\r\n        <!-- Song information  albums -->\r\n        <h3 style=\"font-family: 'Poppins', sans-serif;\" class=\"title\" *ngIf=\"selectedSong?.album?.artist?.artistName\">\r\n            {{ selectedSong?.songTitle }} - {{ selectedSong?.album?.artist?.artistName }}\r\n        </h3>\r\n        <!-- Song information  playlists -->\r\n        <h3 style=\"font-family: 'Poppins', sans-serif;\" class=\"title\" *ngIf=\"!selectedSong?.album?.artist?.artistName && selectedSong?.artist?.artistName\">\r\n            {{ selectedSong?.title }} - {{ selectedSong?.artist?.artistName }}\r\n        </h3>\r\n    </div>\r\n\r\n\r\n    <!-- Player controls -->\r\n    <div class=\"controls mt-3 player-button\">\r\n        <button (click)=\"play_previous_song()\" class=\"btn btn-primary skip-btn\">\r\n            <i class=\"fas fa-backward\"></i>\r\n        </button>\r\n        <button (click)=\"togglePlayPause()\" class=\"btn btn-primary play-pause-btn\">\r\n            <i class=\"fas\" [ngClass]=\"playIcon\"></i>\r\n        </button>\r\n        <button (click)=\"play_next_song()\" class=\"btn btn-primary skip-btn\">\r\n            <i class=\"fas fa-forward\"></i>\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n</ng-container>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}