{"ast":null,"code":"import { ModalComponent } from 'src/app/Components/record-podcast/live-streaming/modal/modal.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Services/Podcast/podcast-broadcast.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/Services/Podcast/podcast-get.service\";\nimport * as i4 from \"@angular/material/dialog\";\nimport * as i5 from \"@angular/common\";\nfunction LiveStreamingComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelement(1, \"i\", 19);\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const stream_r1 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(stream_r1.value.source.listeners);\n  }\n}\nexport class LiveStreamingComponent {\n  constructor(broadcast, route, streamsService, dialog) {\n    this.broadcast = broadcast;\n    this.route = route;\n    this.streamsService = streamsService;\n    this.dialog = dialog;\n    this.micEncendido = false;\n    this.musicOn = false;\n  }\n  ngOnInit() {\n    this.timerInterval = setInterval(() => {\n      this.getLiveStreams();\n    }, 5000);\n  }\n  ngOnDestroy() {\n    clearInterval(this.timerInterval); // Desactiva el intervalo al salir del componente\n  }\n\n  openModal() {\n    this.dialog.open(ModalComponent);\n  }\n  getLiveStreams() {\n    this.streamsService.getLiveStreams().subscribe(data => {\n      this.streamsEnVivo = data;\n      console.log('Datos de transmisiones en vivo:', this.streamsEnVivo);\n    }, error => {\n      console.error('Error al obtener los datos de transmisiones en vivo:', error.error);\n    });\n  }\n  onFileChange(event) {\n    this.file = event.target.files[0];\n    console.log(this.file);\n    if (this.file) {\n      this.broadcast.uploadFile(this.file).subscribe(resquest => {\n        console.log('Archivo subido exitosamente:', resquest);\n      }, error => {\n        console.error('Error al subir archivo:', error.error);\n      });\n    }\n  }\n  toggleMicrophone() {\n    this.broadcast.microphoneControl().subscribe(resquest => {\n      console.log(resquest);\n    }, error => {\n      console.error('Error:', error.error);\n    });\n  }\n  togglePlayMusic() {\n    this.broadcast.musicControl().subscribe(resquest => {\n      console.log(resquest);\n    }, error => {\n      console.error('Error:', error.error);\n    });\n  }\n  stopTransmission() {\n    this.broadcast.stopTransmission().subscribe(resquest => {\n      console.log(resquest);\n      this.route.navigate(['/recordPodcast']);\n    }, error => {\n      console.error('Error:', error.error);\n    });\n  }\n  static #_ = this.ɵfac = function LiveStreamingComponent_Factory(t) {\n    return new (t || LiveStreamingComponent)(i0.ɵɵdirectiveInject(i1.PodcastBroadcastService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.StreamsService), i0.ɵɵdirectiveInject(i4.MatDialog));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LiveStreamingComponent,\n    selectors: [[\"app-live-streaming\"]],\n    decls: 19,\n    vars: 3,\n    consts: [[1, \"contenedor\"], [1, \"container\"], [1, \"row\"], [1, \"col-md-8\", \"col-md-offset-2\"], [1, \"livestreaming-container\"], [1, \"content\"], [1, \"controls\", \"text-center\"], [1, \"btn\", \"btn-music\", \"control-button\", 3, \"click\"], [1, \"fas\", \"fa-music\"], [1, \"btn\", \"btn-record\", \"control-button\", 3, \"click\"], [1, \"fas\", \"fa-microphone\"], [1, \"progress-circle\"], [1, \"left-half-clipper\"], [1, \"first50-bar\"], [1, \"value-bar\"], [1, \"btn\", \"btn-exit\", \"control-button\", 3, \"click\"], [1, \"fas\", \"fa-times\"], [\"class\", \"viewer-count text-right\", 4, \"ngFor\", \"ngForOf\"], [1, \"viewer-count\", \"text-right\"], [1, \"fas\", \"fa-eye\", \"viewer-icon\"]],\n    template: function LiveStreamingComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6)(7, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function LiveStreamingComponent_Template_button_click_7_listener() {\n          return ctx.openModal();\n        });\n        i0.ɵɵelement(8, \"i\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function LiveStreamingComponent_Template_button_click_9_listener() {\n          return ctx.toggleMicrophone();\n        });\n        i0.ɵɵelement(10, \"i\", 10);\n        i0.ɵɵelementStart(11, \"div\", 11)(12, \"div\", 12);\n        i0.ɵɵelement(13, \"div\", 13)(14, \"div\", 14);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(15, \"button\", 15);\n        i0.ɵɵlistener(\"click\", function LiveStreamingComponent_Template_button_click_15_listener() {\n          return ctx.stopTransmission();\n        });\n        i0.ɵɵelement(16, \"i\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(17, LiveStreamingComponent_div_17_Template, 4, 1, \"div\", 17);\n        i0.ɵɵpipe(18, \"keyvalue\");\n        i0.ɵɵelementEnd()()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(17);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(18, 1, ctx.streamsEnVivo));\n      }\n    },\n    dependencies: [i5.NgForOf, i5.KeyValuePipe],\n    styles: [\".container[_ngcontent-%COMP%]{\\n  width: 100%;\\n  background-color: black;\\n  height: 100%;\\n}\\n.content[_ngcontent-%COMP%]{\\n  width: 100%;\\n  height: 200px;\\n  padding: 20px;\\n  margin: 200px;\\n}\\n.contenedor[_ngcontent-%COMP%]{\\n    width: 100%;\\n    height: 100%;\\n    background-color: black;\\n}\\n.livestreaming-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.streaming-video[_ngcontent-%COMP%] {\\n  margin: 20px 0;\\n}\\n\\n.controls[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n}\\n\\n.control-button[_ngcontent-%COMP%] {\\n  margin: 0 10px;\\n  padding: 10px 20px;\\n  font-size: 16px;\\n}\\n\\n.viewer-count[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 10px;\\n  right: 10px;\\n  font-size: 24px;\\n  color: white;\\n}\\n\\n.viewer-icon[_ngcontent-%COMP%] {\\n  font-size: 28px;\\n  margin-right: 5px;\\n}\\n\\n\\n\\n.btn-music[_ngcontent-%COMP%], .btn-exit[_ngcontent-%COMP%] {\\n  width: 120px; \\n  height: 120px; \\n  background: radial-gradient(circle, #1e1e1e 50%), linear-gradient(to right, #1e1e1e, #1e1e1e);\\n  background-size: 100% 100%, 2px 100%;\\n  background-position: center, 0 0;\\n  background-repeat: no-repeat;\\n  border-radius: 50%;\\n  font-size: 30px;\\n}\\n.btn-record[_ngcontent-%COMP%] {\\n  width: 120px; \\n  height: 120px; \\n  background: rgba(11, 78, 221, 0.973);\\n  background-size: 100% 100%, 2px 100%;\\n  background-position: center, 0 0;\\n  background-repeat: no-repeat;\\n  border-radius: 50%;\\n  font-size: 24px; \\n  animation: none; \\n\\n}\\n\\n.btn-record.recording[_ngcontent-%COMP%] {\\n  animation: _ngcontent-%COMP%_pulse 0.5s infinite alternate;  \\n\\n}\\n\\n.btn-record.paused[_ngcontent-%COMP%] {\\n  animation: none;  \\n\\n}\\n\\n.timer[_ngcontent-%COMP%] {\\n  font-size: 18px; \\n}\\n\\n\\n@keyframes _ngcontent-%COMP%_pulse {\\n  from {\\n    transform: scale(1);\\n  }\\n  to {\\n    transform: scale(1.1);\\n  }\\n}\\n\\n.progress-circle[_ngcontent-%COMP%] {\\n  width: 30px;\\n  height: 30px;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n  clip: rect(0, 30px, 30px, 15px);\\n  border-radius: 50%;\\n}\\n\\n.left-half-clipper[_ngcontent-%COMP%] {\\n  width: 15px;\\n  height: 30px;\\n  position: absolute;\\n  overflow: hidden;\\n  clip: rect(0, 15px, 30px, 0);\\n}\\n\\n.first50-bar[_ngcontent-%COMP%], .value-bar[_ngcontent-%COMP%] {\\n  width: 30px;\\n  height: 30px;\\n  position: absolute;\\n  border-radius: 50%;\\n}\\n\\n.first50-bar[_ngcontent-%COMP%] {\\n  clip: rect(0, 15px, 30px, 0);\\n  background-color: #666666;\\n}\\n\\n.value-bar[_ngcontent-%COMP%] {\\n  clip: rect(0, 30px, 30px, 15px);\\n  background-color: red;\\n}\\n\\n.recording-text[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 100%; \\n\\n  left: 50%;\\n  transform: translateX(-50%);\\n  background-color: red;\\n  color: white;\\n  font-size: 12px;\\n  padding: 2px 5px;\\n  border-radius: 5px;\\n  display: none;\\n  height: 16px; \\n\\n}\\n\\n.btn-record.recording[_ngcontent-%COMP%]   .recording-text[_ngcontent-%COMP%] {\\n  display: block;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvQ29tcG9uZW50cy9yZWNvcmQtcG9kY2FzdC9saXZlLXN0cmVhbWluZy9saXZlLXN0cmVhbWluZy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQTtFQUNFLFdBQVc7RUFDWCx1QkFBdUI7RUFDdkIsWUFBWTtBQUNkO0FBQ0E7RUFDRSxXQUFXO0VBQ1gsYUFBYTtFQUNiLGFBQWE7RUFDYixhQUFhO0FBQ2Y7QUFDQTtJQUNJLFdBQVc7SUFDWCxZQUFZO0lBQ1osdUJBQXVCO0FBQzNCO0FBQ0E7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLG1CQUFtQjtFQUNuQixXQUFXO0VBQ1gsWUFBWTtBQUNkOztBQUVBO0VBQ0UsY0FBYztBQUNoQjs7QUFFQTtFQUNFLGFBQWE7RUFDYix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxjQUFjO0VBQ2Qsa0JBQWtCO0VBQ2xCLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsU0FBUztFQUNULFdBQVc7RUFDWCxlQUFlO0VBQ2YsWUFBWTtBQUNkOztBQUVBO0VBQ0UsZUFBZTtFQUNmLGlCQUFpQjtBQUNuQjs7OztBQUlBOztFQUVFLFlBQVk7RUFDWixhQUFhO0VBQ2IsNkZBQTZGO0VBQzdGLG9DQUFvQztFQUNwQyxnQ0FBZ0M7RUFDaEMsNEJBQTRCO0VBQzVCLGtCQUFrQjtFQUNsQixlQUFlO0FBQ2pCO0FBQ0E7RUFDRSxZQUFZO0VBQ1osYUFBYTtFQUNiLG9DQUFvQztFQUNwQyxvQ0FBb0M7RUFDcEMsZ0NBQWdDO0VBQ2hDLDRCQUE0QjtFQUM1QixrQkFBa0I7RUFDbEIsZUFBZTtFQUNmLGVBQWUsRUFBRSx3Q0FBd0M7QUFDM0Q7O0FBRUE7RUFDRSx3Q0FBd0MsR0FBRyxxREFBcUQ7QUFDbEc7O0FBRUE7RUFDRSxlQUFlLEdBQUcsZ0RBQWdEO0FBQ3BFOztBQUVBO0VBQ0UsZUFBZTtBQUNqQjs7O0FBR0E7RUFDRTtJQUNFLG1CQUFtQjtFQUNyQjtFQUNBO0lBQ0UscUJBQXFCO0VBQ3ZCO0FBQ0Y7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixRQUFRO0VBQ1IsU0FBUztFQUNULGdDQUFnQztFQUNoQywrQkFBK0I7RUFDL0Isa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixrQkFBa0I7RUFDbEIsZ0JBQWdCO0VBQ2hCLDRCQUE0QjtBQUM5Qjs7QUFFQTs7RUFFRSxXQUFXO0VBQ1gsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSw0QkFBNEI7RUFDNUIseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UsK0JBQStCO0VBQy9CLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixTQUFTLEVBQUUscURBQXFEO0VBQ2hFLFNBQVM7RUFDVCwyQkFBMkI7RUFDM0IscUJBQXFCO0VBQ3JCLFlBQVk7RUFDWixlQUFlO0VBQ2YsZ0JBQWdCO0VBQ2hCLGtCQUFrQjtFQUNsQixhQUFhO0VBQ2IsWUFBWSxFQUFFLDBDQUEwQztBQUMxRDs7QUFFQTtFQUNFLGNBQWM7QUFDaEIiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLmNvbnRhaW5lcntcclxuICB3aWR0aDogMTAwJTtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcclxuICBoZWlnaHQ6IDEwMCU7XHJcbn1cclxuLmNvbnRlbnR7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiAyMDBweDtcclxuICBwYWRkaW5nOiAyMHB4O1xyXG4gIG1hcmdpbjogMjAwcHg7XHJcbn1cclxuLmNvbnRlbmVkb3J7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGhlaWdodDogMTAwJTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xyXG59XHJcbi5saXZlc3RyZWFtaW5nLWNvbnRhaW5lciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG59XHJcblxyXG4uc3RyZWFtaW5nLXZpZGVvIHtcclxuICBtYXJnaW46IDIwcHggMDtcclxufVxyXG5cclxuLmNvbnRyb2xzIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG59XHJcblxyXG4uY29udHJvbC1idXR0b24ge1xyXG4gIG1hcmdpbjogMCAxMHB4O1xyXG4gIHBhZGRpbmc6IDEwcHggMjBweDtcclxuICBmb250LXNpemU6IDE2cHg7XHJcbn1cclxuXHJcbi52aWV3ZXItY291bnQge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB0b3A6IDEwcHg7XHJcbiAgcmlnaHQ6IDEwcHg7XHJcbiAgZm9udC1zaXplOiAyNHB4O1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxufVxyXG5cclxuLnZpZXdlci1pY29uIHtcclxuICBmb250LXNpemU6IDI4cHg7XHJcbiAgbWFyZ2luLXJpZ2h0OiA1cHg7XHJcbn1cclxuXHJcblxyXG5cclxuLmJ0bi1tdXNpYyxcclxuLmJ0bi1leGl0IHtcclxuICB3aWR0aDogMTIwcHg7IFxyXG4gIGhlaWdodDogMTIwcHg7IFxyXG4gIGJhY2tncm91bmQ6IHJhZGlhbC1ncmFkaWVudChjaXJjbGUsICMxZTFlMWUgNTAlKSwgbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjMWUxZTFlLCAjMWUxZTFlKTtcclxuICBiYWNrZ3JvdW5kLXNpemU6IDEwMCUgMTAwJSwgMnB4IDEwMCU7XHJcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyLCAwIDA7XHJcbiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcclxuICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgZm9udC1zaXplOiAzMHB4O1xyXG59XHJcbi5idG4tcmVjb3JkIHtcclxuICB3aWR0aDogMTIwcHg7IFxyXG4gIGhlaWdodDogMTIwcHg7IFxyXG4gIGJhY2tncm91bmQ6IHJnYmEoMTEsIDc4LCAyMjEsIDAuOTczKTtcclxuICBiYWNrZ3JvdW5kLXNpemU6IDEwMCUgMTAwJSwgMnB4IDEwMCU7XHJcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyLCAwIDA7XHJcbiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcclxuICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgZm9udC1zaXplOiAyNHB4OyBcclxuICBhbmltYXRpb246IG5vbmU7IC8qIEVsaW1pbmFtb3MgbGEgYW5pbWFjacODwrNuIHBvciBkZWZlY3RvICovXHJcbn1cclxuXHJcbi5idG4tcmVjb3JkLnJlY29yZGluZyB7XHJcbiAgYW5pbWF0aW9uOiBwdWxzZSAwLjVzIGluZmluaXRlIGFsdGVybmF0ZTsgIC8qIEFwbGljYW1vcyBsYSBhbmltYWNpw4PCs24gc29sbyBjdWFuZG8gZXN0w4PCoSBncmFiYW5kbyAqL1xyXG59XHJcblxyXG4uYnRuLXJlY29yZC5wYXVzZWQge1xyXG4gIGFuaW1hdGlvbjogbm9uZTsgIC8qIEVsaW1pbmFtb3MgbGEgYW5pbWFjacODwrNuIGN1YW5kbyBlc3TDg8KhIHBhdXNhZG8gKi9cclxufVxyXG5cclxuLnRpbWVyIHtcclxuICBmb250LXNpemU6IDE4cHg7IFxyXG59XHJcblxyXG5cclxuQGtleWZyYW1lcyBwdWxzZSB7XHJcbiAgZnJvbSB7XHJcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDEpO1xyXG4gIH1cclxuICB0byB7XHJcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7XHJcbiAgfVxyXG59XHJcblxyXG4ucHJvZ3Jlc3MtY2lyY2xlIHtcclxuICB3aWR0aDogMzBweDtcclxuICBoZWlnaHQ6IDMwcHg7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHRvcDogNTAlO1xyXG4gIGxlZnQ6IDUwJTtcclxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcclxuICBjbGlwOiByZWN0KDAsIDMwcHgsIDMwcHgsIDE1cHgpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcclxufVxyXG5cclxuLmxlZnQtaGFsZi1jbGlwcGVyIHtcclxuICB3aWR0aDogMTVweDtcclxuICBoZWlnaHQ6IDMwcHg7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgY2xpcDogcmVjdCgwLCAxNXB4LCAzMHB4LCAwKTtcclxufVxyXG5cclxuLmZpcnN0NTAtYmFyLFxyXG4udmFsdWUtYmFyIHtcclxuICB3aWR0aDogMzBweDtcclxuICBoZWlnaHQ6IDMwcHg7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcclxufVxyXG5cclxuLmZpcnN0NTAtYmFyIHtcclxuICBjbGlwOiByZWN0KDAsIDE1cHgsIDMwcHgsIDApO1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM2NjY2NjY7XHJcbn1cclxuXHJcbi52YWx1ZS1iYXIge1xyXG4gIGNsaXA6IHJlY3QoMCwgMzBweCwgMzBweCwgMTVweCk7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmVkO1xyXG59XHJcblxyXG4ucmVjb3JkaW5nLXRleHQge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB0b3A6IDEwMCU7IC8qIENvbG9jYW1vcyBlbCB0ZXh0byBkZWJham8gZGVsIGJvdMODwrNuIGRlIGdyYWJhY2nDg8KzbiAqL1xyXG4gIGxlZnQ6IDUwJTtcclxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmVkO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBmb250LXNpemU6IDEycHg7XHJcbiAgcGFkZGluZzogMnB4IDVweDtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgZGlzcGxheTogbm9uZTtcclxuICBoZWlnaHQ6IDE2cHg7IC8qIEFsdHVyYSBmaWphIHBhcmEgZWwgZXNwYWNpbyByZXNlcnZhZG8gKi9cclxufVxyXG5cclxuLmJ0bi1yZWNvcmQucmVjb3JkaW5nIC5yZWNvcmRpbmctdGV4dCB7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["ModalComponent","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","stream_r1","value","source","listeners","LiveStreamingComponent","constructor","broadcast","route","streamsService","dialog","micEncendido","musicOn","ngOnInit","timerInterval","setInterval","getLiveStreams","ngOnDestroy","clearInterval","openModal","open","subscribe","data","streamsEnVivo","console","log","error","onFileChange","event","file","target","files","uploadFile","resquest","toggleMicrophone","microphoneControl","togglePlayMusic","musicControl","stopTransmission","navigate","_","ɵɵdirectiveInject","i1","PodcastBroadcastService","i2","Router","i3","StreamsService","i4","MatDialog","_2","selectors","decls","vars","consts","template","LiveStreamingComponent_Template","rf","ctx","ɵɵlistener","LiveStreamingComponent_Template_button_click_7_listener","LiveStreamingComponent_Template_button_click_9_listener","LiveStreamingComponent_Template_button_click_15_listener","ɵɵtemplate","LiveStreamingComponent_div_17_Template","ɵɵproperty","ɵɵpipeBind1"],"sources":["C:\\Comercio\\version12\\musicsound\\front-end\\src\\app\\Components\\record-podcast\\live-streaming\\live-streaming.component.ts","C:\\Comercio\\version12\\musicsound\\front-end\\src\\app\\Components\\record-podcast\\live-streaming\\live-streaming.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { PodcastBroadcastService } from 'src/app/Services/Podcast/podcast-broadcast.service';\r\nimport { StreamsService } from 'src/app/Services/Podcast/podcast-get.service';\r\nimport { ModalComponent } from 'src/app/Components/record-podcast/live-streaming/modal/modal.component';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-live-streaming',\r\n  templateUrl: './live-streaming.component.html',\r\n  styleUrls: ['./live-streaming.component.css']\r\n})\r\nexport class LiveStreamingComponent {\r\n  micEncendido: boolean = false;\r\n  musicOn: boolean = false;\r\n  streamsEnVivo: any[];\r\n  timerInterval: any;\r\n  file: any;\r\n\r\n  constructor(\r\n    private broadcast:PodcastBroadcastService,\r\n    private route:Router,\r\n    private streamsService: StreamsService,\r\n    private dialog: MatDialog\r\n  ){}\r\n\r\n  ngOnInit() {\r\n    this.timerInterval = setInterval(() => {\r\n      this.getLiveStreams(); \r\n    }, 5000);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    clearInterval(this.timerInterval); // Desactiva el intervalo al salir del componente\r\n  }\r\n\r\n  openModal(){\r\n    this.dialog.open(ModalComponent);\r\n  }\r\n\r\n  getLiveStreams(): void {\r\n    this.streamsService.getLiveStreams()\r\n      .subscribe(\r\n        data => {\r\n          this.streamsEnVivo = data;\r\n          console.log('Datos de transmisiones en vivo:', this.streamsEnVivo);\r\n        },\r\n        error => {\r\n          console.error('Error al obtener los datos de transmisiones en vivo:', error.error);\r\n        }\r\n      );\r\n  }\r\n\r\n  onFileChange(event) {\r\n    this.file = event.target.files[0];\r\n    console.log(this.file)\r\n    if (this.file) {\r\n      this.broadcast.uploadFile(this.file).subscribe(\r\n        (resquest) => {\r\n          console.log('Archivo subido exitosamente:', resquest);\r\n        },\r\n        (error) => {\r\n          console.error('Error al subir archivo:', error.error);\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  toggleMicrophone() {\r\n    this.broadcast.microphoneControl().subscribe(\r\n      (resquest) => {\r\n        console.log(resquest);\r\n      },\r\n      (error) => {\r\n        console.error('Error:', error.error);\r\n      }\r\n    );\r\n  }\r\n\r\n  togglePlayMusic(){\r\n    this.broadcast.musicControl().subscribe(\r\n      (resquest) => {\r\n        console.log(resquest);\r\n      },\r\n      (error) => {\r\n        console.error('Error:', error.error);\r\n      }\r\n    );\r\n  }\r\n\r\n  stopTransmission() {\r\n    this.broadcast.stopTransmission().subscribe(\r\n      (resquest) => {\r\n        console.log(resquest);\r\n        this.route.navigate(['/recordPodcast']);\r\n      },\r\n      (error) => {\r\n        console.error('Error:', error.error);\r\n      },\r\n    );\r\n  }\r\n}","<div class=\"contenedor\">\r\n    <div class=\"container\">\r\n        <div class=\"row\">\r\n            <div class=\"col-md-8 col-md-offset-2\">\r\n                <!-- Main container for the live streaming section -->\r\n                <div class=\"livestreaming-container\">\r\n                    <!-- Content area inside the livestreaming container -->\r\n                    <div class=\"content\">\r\n                        <!-- Controls section for the music and recording features -->\r\n                        <div class=\"controls text-center\">\r\n                            <button class=\"btn btn-music control-button\" (click)=\"openModal()\">\r\n                                <i class=\"fas fa-music\"></i>  \r\n                            </button>\r\n                            \r\n                            <!-- Button for recording, with dynamic classes based on recording state -->\r\n                            <button (click)=\"toggleMicrophone()\" class=\"btn btn-record control-button\">\r\n                                <i class=\"fas fa-microphone\"></i>\r\n                                <div class=\"progress-circle\">\r\n                                    <div class=\"left-half-clipper\">\r\n                                        <div class=\"first50-bar\"></div>\r\n                                        <div class=\"value-bar\"></div>\r\n                                    </div>\r\n                                </div>\r\n                            </button>\r\n\r\n                            <!-- Button to exit/cancel the recording -->\r\n                            <button (click)=\"stopTransmission()\" class=\"btn btn-exit control-button\">\r\n                                <i class=\"fas fa-times\"></i>\r\n                            </button>\r\n\r\n                            <!-- Viewer count display -->\r\n                            <div *ngFor=\"let stream of streamsEnVivo | keyvalue\" class=\"viewer-count text-right\">\r\n                                <i class=\"fas fa-eye viewer-icon\"></i> <span>{{stream.value.source.listeners}}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}