{"ast":null,"code":"import { NotAuthenticatedComponent } from './notAuthenticated/notAuthenticated.component';\nimport { AuthenticatedComponent } from './authenticated/authenticated.component';\nimport { DefaultComponent } from './default/default.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/Services/user.service\";\nexport class DynamicComponentDirective {\n  constructor(viewContainerRef, componentFactoryResolver, uService) {\n    this.viewContainerRef = viewContainerRef;\n    this.componentFactoryResolver = componentFactoryResolver;\n    this.uService = uService;\n  }\n  ngOnInit() {\n    this.loadComponent();\n  }\n  ngOnDestroy() {\n    this.destroyComponent();\n  }\n  loadComponent() {\n    this.uService.isAuth().then(datos => {\n      const componentFactory = this.componentFactoryResolver.resolveComponentFactory(datos.value ? AuthenticatedComponent : NotAuthenticatedComponent);\n      this.viewContainerRef.clear();\n      this.componentRef = this.viewContainerRef.createComponent(componentFactory);\n    });\n    const componentFactoryDefault = this.componentFactoryResolver.resolveComponentFactory(DefaultComponent);\n    this.viewContainerRef.clear();\n    this.componentRef = this.viewContainerRef.createComponent(componentFactoryDefault);\n  }\n  destroyComponent() {\n    if (this.componentRef) {\n      this.componentRef.destroy();\n    }\n  }\n  static #_ = this.ɵfac = function DynamicComponentDirective_Factory(t) {\n    return new (t || DynamicComponentDirective)(i0.ɵɵdirectiveInject(i0.ViewContainerRef), i0.ɵɵdirectiveInject(i0.ComponentFactoryResolver), i0.ɵɵdirectiveInject(i1.UserService));\n  };\n  static #_2 = this.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n    type: DynamicComponentDirective,\n    selectors: [[\"\", \"appDynamicComponent\", \"\"]]\n  });\n}","map":{"version":3,"names":["NotAuthenticatedComponent","AuthenticatedComponent","DefaultComponent","DynamicComponentDirective","constructor","viewContainerRef","componentFactoryResolver","uService","ngOnInit","loadComponent","ngOnDestroy","destroyComponent","isAuth","then","datos","componentFactory","resolveComponentFactory","value","clear","componentRef","createComponent","componentFactoryDefault","destroy","_","i0","ɵɵdirectiveInject","ViewContainerRef","ComponentFactoryResolver","i1","UserService","_2","selectors"],"sources":["C:\\Comercio\\version12\\musicsound\\front-end\\src\\app\\Components\\header\\auth.directive.ts"],"sourcesContent":["import { Directive, ViewContainerRef, ComponentFactoryResolver, OnInit, OnDestroy, OnChanges, SimpleChanges, DoCheck, AfterContentInit } from '@angular/core';\r\nimport { UserService } from 'src/app/Services/user.service';\r\nimport { NotAuthenticatedComponent } from './notAuthenticated/notAuthenticated.component';\r\nimport { AuthenticatedComponent } from './authenticated/authenticated.component';\r\nimport { DefaultComponent } from './default/default.component';\r\n\r\n@Directive({\r\n  selector: '[appDynamicComponent]'\r\n})\r\nexport class DynamicComponentDirective implements OnInit, OnDestroy{\r\n  private componentRef: any;\r\n\r\n  constructor(\r\n    private viewContainerRef: ViewContainerRef,\r\n    private componentFactoryResolver: ComponentFactoryResolver,\r\n    private uService: UserService\r\n  ) {  }\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.loadComponent();\r\n    \r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroyComponent();\r\n  }\r\n\r\n  private loadComponent(): void {\r\n    this.uService.isAuth().then((datos) => {\r\n      const componentFactory = this.componentFactoryResolver.resolveComponentFactory(\r\n        datos.value ? AuthenticatedComponent : NotAuthenticatedComponent\r\n      );\r\n  \r\n      this.viewContainerRef.clear();\r\n      this.componentRef = this.viewContainerRef.createComponent(componentFactory);\r\n    });\r\n\r\n    const componentFactoryDefault = this.componentFactoryResolver.resolveComponentFactory(DefaultComponent);\r\n\r\n    this.viewContainerRef.clear();\r\n    this.componentRef = this.viewContainerRef.createComponent(componentFactoryDefault);\r\n  }\r\n\r\n  private destroyComponent(): void {\r\n    if (this.componentRef) {\r\n      this.componentRef.destroy();\r\n    }\r\n  }\r\n}\r\n"],"mappings":"AAEA,SAASA,yBAAyB,QAAQ,+CAA+C;AACzF,SAASC,sBAAsB,QAAQ,yCAAyC;AAChF,SAASC,gBAAgB,QAAQ,6BAA6B;;;AAK9D,OAAM,MAAOC,yBAAyB;EAGpCC,YACUC,gBAAkC,EAClCC,wBAAkD,EAClDC,QAAqB;IAFrB,KAAAF,gBAAgB,GAAhBA,gBAAgB;IAChB,KAAAC,wBAAwB,GAAxBA,wBAAwB;IACxB,KAAAC,QAAQ,GAARA,QAAQ;EACb;EAGLC,QAAQA,CAAA;IACN,IAAI,CAACC,aAAa,EAAE;EAEtB;EAEAC,WAAWA,CAAA;IACT,IAAI,CAACC,gBAAgB,EAAE;EACzB;EAEQF,aAAaA,CAAA;IACnB,IAAI,CAACF,QAAQ,CAACK,MAAM,EAAE,CAACC,IAAI,CAAEC,KAAK,IAAI;MACpC,MAAMC,gBAAgB,GAAG,IAAI,CAACT,wBAAwB,CAACU,uBAAuB,CAC5EF,KAAK,CAACG,KAAK,GAAGhB,sBAAsB,GAAGD,yBAAyB,CACjE;MAED,IAAI,CAACK,gBAAgB,CAACa,KAAK,EAAE;MAC7B,IAAI,CAACC,YAAY,GAAG,IAAI,CAACd,gBAAgB,CAACe,eAAe,CAACL,gBAAgB,CAAC;IAC7E,CAAC,CAAC;IAEF,MAAMM,uBAAuB,GAAG,IAAI,CAACf,wBAAwB,CAACU,uBAAuB,CAACd,gBAAgB,CAAC;IAEvG,IAAI,CAACG,gBAAgB,CAACa,KAAK,EAAE;IAC7B,IAAI,CAACC,YAAY,GAAG,IAAI,CAACd,gBAAgB,CAACe,eAAe,CAACC,uBAAuB,CAAC;EACpF;EAEQV,gBAAgBA,CAAA;IACtB,IAAI,IAAI,CAACQ,YAAY,EAAE;MACrB,IAAI,CAACA,YAAY,CAACG,OAAO,EAAE;;EAE/B;EAAC,QAAAC,CAAA,G;qBAvCUpB,yBAAyB,EAAAqB,EAAA,CAAAC,iBAAA,CAAAD,EAAA,CAAAE,gBAAA,GAAAF,EAAA,CAAAC,iBAAA,CAAAD,EAAA,CAAAG,wBAAA,GAAAH,EAAA,CAAAC,iBAAA,CAAAG,EAAA,CAAAC,WAAA;EAAA;EAAA,QAAAC,EAAA,G;UAAzB3B,yBAAyB;IAAA4B,SAAA;EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}